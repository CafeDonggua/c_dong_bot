# Feature Specification: 自然語言搜尋與案例整理

**Feature Branch**: `001-nl-search-report`  
**Created**: 2026-02-02  
**Status**: Done  
**Input**: User description: "我想要把網路搜尋或是統整的功能也改為自然語言辨識 比如： 請幫我 websearch 近日嘉南羊乳與開啟行銷公司的各種公關危機，包括對脆社群影響、風險、羊編(官方小編)...等、具體地整理嘉南羊乳在經營脆社群的前後改變，以及他們官方高層最後決定倒向保護開啟行銷的決定...等 請完整蒐集相關資訊並彙整為一個案例、做為日後我在行銷與流量經營方面的一個參考 類似這樣的需求，然後bot會先摘要需要搜尋的關鍵字，進行搜尋，進一步彙整或是搜尋等等，最後統整為md檔案儲存 而這樣形式，在原先記憶的部分就要進行修改，原先僅是將技藝的md檔案儲存在指定的目錄底下，現在要改為在那個目錄底下建立memory資料夾並儲存到裡面，而要求整理的資料則是儲存到另一個資料夾，並在當天的記憶md檔案裏面紀錄有整理這個資料的動作，並加上超連結指向該檔案"
**語言**: 本模板與輸出內容一律使用正體中文

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 自然語言觸發搜尋彙整 (Priority: P1)

使用者以自然語言描述想要查找與彙整的主題，助理會先抓出關鍵搜尋意圖並完成搜尋彙整回覆。

**Why this priority**: 這是主要需求，讓使用者不必輸入指令即可完成搜尋與彙整。

**Independent Test**: 以一段自然語言需求觸發搜尋，回覆包含摘要、重點與來源。

**Acceptance Scenarios**:

1. **Given** 使用者輸入自然語言搜尋需求，**When** 系統解析出搜尋主題並完成搜尋，**Then** 回覆包含摘要、重點與來源
2. **Given** 使用者輸入自然語言搜尋需求，**When** 無法取得有效結果，**Then** 回覆說明無結果並提供改寫建議

---

### User Story 2 - 生成案例文件並存檔 (Priority: P2)

使用者要求整理為案例時，助理會將彙整結果輸出為可存檔文件，並回覆文件位置或連結。

**Why this priority**: 使用者希望保留長期參考內容並可追溯。

**Independent Test**: 以案例整理需求產出可下載或可存取的文件。

**Acceptance Scenarios**:

1. **Given** 使用者要求整理成案例，**When** 系統完成彙整，**Then** 生成案例文件並提供連結或路徑

---

### User Story 3 - 記憶與整理紀錄分流 (Priority: P3)

系統將日常記憶與案例整理文件分開保存，並在當日記憶中留下整理紀錄與連結。

**Why this priority**: 避免不同類型資料混雜，方便回顧與追蹤。

**Independent Test**: 當日記憶檔案可看到整理紀錄與連結，且案例文件存放於指定資料夾。

**Acceptance Scenarios**:

1. **Given** 使用者完成案例整理，**When** 系統保存結果，**Then** 記憶檔案新增整理紀錄並包含指向案例文件的連結

---

### Edge Cases

- 當自然語言需求過於廣泛時，系統提示縮小搜尋範圍
- 當外部搜尋無法取得資訊時，系統提供替代查詢建議
- 當檔案寫入失敗時，系統提供可理解的錯誤訊息與重試提示

## 測試與驗證策略 *(mandatory)*

- **自動化測試範圍**: 搜尋意圖解析、彙整回覆格式、案例文件輸出、記憶紀錄連結
- **手動驗證步驟**: 以 2 個自然語言需求測試搜尋與彙整，並確認案例文件與記憶紀錄
- **無法自動化原因**: 需實際連網驗證搜尋品質，部分以抽樣方式驗證

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統 MUST 支援自然語言需求解析並觸發網路搜尋彙整
- **FR-002**: 系統 MUST 先產出可搜尋的關鍵主題再進行搜尋彙整
- **FR-003**: 系統 MUST 將彙整結果輸出為案例文件並提供存取連結或路徑
- **FR-004**: 系統 MUST 將日常記憶與案例文件分開保存
- **FR-005**: 系統 MUST 在當日記憶中記錄整理行為並附上案例文件連結
- **FR-006**: 系統 MUST 在搜尋或存檔失敗時提供清楚的錯誤訊息

對應驗證：各 FR 的驗證以使用者故事的 Acceptance Scenarios 為準。

### Key Entities *(include if feature involves data)*

- **自然語言請求**: 使用者描述的搜尋與整理需求
- **搜尋主題**: 從自然語言萃取出的搜尋關鍵主題
- **案例文件**: 彙整後的可保存文件
- **記憶紀錄**: 當日記憶檔案中的整理行為紀錄與連結

## 適用範圍

- 以 Telegram 個人助理的自然語言搜尋與案例整理為主要情境
- 以公開可存取的網路資料作為主要來源

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 90% 的自然語言搜尋請求在 15 秒內完成彙整回覆
- **SC-002**: 90% 的案例整理請求能產出可存取的案例文件
- **SC-003**: 當日記憶檔案紀錄整理行為的完整率達 95%
- **SC-004**: 使用者對彙整可讀性滿意度達 4/5 以上

## Assumptions

- 使用者提供的主題可被公開搜尋
- 案例文件可採可讀性高的標準格式
- 記憶與案例文件可持久保存並具備可追溯連結
